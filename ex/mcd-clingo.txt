num(0..20).
mcd(A,B,M)  :- num(A), num(B), A>B, A>0, B>0, mcd(B,A \ B,M).
mcd(A,B,M)  :- num(A), num(B), B>A, A>0, B>0, mcd(A,B \ A,M).
mcd(A,A,A)  :- num(A), A>0.
mcd(A,0,A)  :- num(A), A>0.
mcd(0,B,B)  :- num(B), B>0.

q(9,3).
q(4,10).
p(W) :- q(X,Y), mcd(X,Y,W).
%#show mcd/3.
#show p/1.